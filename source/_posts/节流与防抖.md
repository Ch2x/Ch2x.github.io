---
title: 节流与防抖
date: 2019-11-03 16:57:38
tags:
---

```javascript
function throttle(fn, interval) {
    var last = 0;

    return function() {
        var context = this,
            args = arguments,
            now = +new Date();
        if(now - last >= interval) {
            last = now;
            fn.apply(context, args);
        }
    }
}

function debounce(fn, delay) {
    var timer = null;

    return function() {
        var context = this,
            args = arguments;
        
        if(timer) {
            clearTimeout(timer);
        }

        timer = setTimout(function() {
            fn.apply(context, args);
        }, delay);
    }
}

// 优化debounce

function debounce(fn, delay) {
    var timer = null,
        args = arguments,
        last = 0;

    return function() {
        var context = this,
            now = +new Date();

        if(now - last < delay) {
            if(timer) {
                clearTimeout(timer);
            }

            timer = setTimout(function() {
                fn.apply(context, args);
            }, delay);
        } else {
            last = now;
            fn.apply(context, args);
        } 
    }
}



```
